# Decision Record Skill

아키텍처 의사결정 기록(Architecture Decision Record) 워크플로우

## 역할

기술적 의사결정을 구조화하여 기록한다. MADR(Markdown Architectural Decision Records) 기반 템플릿에 파기 조건을 추가하여, 결정의 맥락과 수명을 함께 관리한다.

## 트리거

- "decision-record", "adr", "의사결정", "결정 기록"

## 워크플로우

1. **결정 대상 파악**: 사용자에게 질문하여 기록할 의사결정을 명확히 한다.
2. **기존 ADR 확인**: `docs/decisions/` 디렉토리의 기존 기록을 검색하여 관련/충돌 여부를 확인한다.
3. **ADR 작성**: 아래 템플릿에 따라 문서를 작성한다.
4. **사용자 검토**: 문서를 제시하고 승인을 받는다.
5. **저장**: `docs/decisions/NNNN-제목.md` 형식으로 저장한다.
   - `NNNN`: 4자리 순번 (0001부터)
   - `docs/decisions/` 디렉토리가 없으면 자동 생성한다

## 템플릿

```markdown
# NNNN. 제목

## 상태

제안됨 | 승인됨 | 폐기됨 | 대체됨 (by NNNN)

## 맥락

이 결정이 필요한 배경과 문제 상황을 서술한다.

## 결정

선택한 방안과 그 이유를 서술한다.

## 고려한 대안

### 대안 1: {이름}

- 장점: ...
- 단점: ...

### 대안 2: {이름}

- 장점: ...
- 단점: ...

## 결과

이 결정으로 인해 예상되는 영향을 서술한다.

- 긍정적 결과: ...
- 부정적 결과 / 트레이드오프: ...

## 파기 조건

다음 조건 중 하나라도 충족되면 이 결정을 재검토한다:

- [ ] 조건 1
- [ ] 조건 2
```

## 사이클 연계

- `/spec` 연계: 명세 작성 시 관련 ADR을 참조하거나, 새로운 의사결정이 필요하면 ADR 작성을 안내한다.
- `/verify` 연계: 정합성 검증 시 ADR의 파기 조건을 점검 대상에 포함할 수 있다.

## 규칙

- 하나의 ADR에는 하나의 의사결정만 기록한다
- 기존 ADR을 직접 수정하지 않는다. 대체 시 새 ADR을 작성하고 기존 ADR 상태를 "대체됨"으로 변경한다
- 파기 조건은 반드시 1개 이상 포함한다
- 사용자 승인 전까지 파일을 저장하지 않는다
